:root {
  color-scheme: light dark;
  --bg: #0b0c10;
  --panel: #111218;
  --panel-2: #0e0f14;
  --text: #e9e9ef;
  --muted: #b8b8c2;
  --primary: #6c9efc;
  --primary-600: #4d83f8;
  --border: #22242e;
  --chip: #1a1c25;
  --bot: #171923;
  --user: #1f2937;
  --green: #3bd1a5;
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.chat-app {
  display: grid;
  grid-template-rows: auto 1fr auto;
  height: 100dvh;
}

.chat-header {
  position: sticky;
  top: 0;
  z-index: 10;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(0deg, var(--panel), var(--panel-2));
}
.brand {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .9rem 1rem;
  max-width: 920px;
  margin: 0 auto;
}
.brand .dot {
  width: .6rem; height: .6rem; border-radius: 999px; background: var(--green);
  box-shadow: 0 0 0 .25rem color-mix(in oklab, var(--green), transparent 85%);
}
.brand .title { font-weight: 700; letter-spacing: .2px; }
.brand .status { color: var(--muted); font-size: .9rem; }

.chat-main {
  display: grid;
  grid-template-rows: 1fr auto;
  gap: .5rem;
  max-width: 920px;
  width: 100%;
  margin: 0 auto;
  padding: 1rem;
}

.message-list {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel);
  padding: .75rem;
  overflow: auto;
  min-height: 50dvh;
}
.row { display: flex; margin: .5rem 0; }
.row.user { justify-content: flex-end; }
.row.bot { justify-content: flex-start; }

.bubble {
  max-width: min(85%, 720px);
  border: 1px solid var(--border);
  padding: .6rem .8rem;
  border-radius: 12px;
  background: var(--bot);
  box-shadow: 0 4px 14px rgba(0,0,0,.25);
}
.row.user .bubble { background: var(--user); }

.bubble .bubble-header {
  display: flex; gap: .6rem; align-items: baseline; justify-content: space-between;
  color: var(--muted);
  font-size: .8rem;
}
.bubble .content { margin: .4rem 0 0; line-height: 1.55; white-space: pre-wrap; }

.typing { display: inline-flex; gap: .25rem; margin-top: .4rem; }
.typing span { width: .35rem; height: .35rem; border-radius: 999px; background: var(--muted); opacity: .7; animation: pulse 1.3s infinite ease-in-out; }
.typing span:nth-child(2){ animation-delay: .15s }
.typing span:nth-child(3){ animation-delay: .3s }
@keyframes pulse { 0%, 80%, 100%{ transform: translateY(0); opacity: .6 } 40%{ transform: translateY(-2px); opacity: 1 } }

.bubble.products { padding: .6rem; }
.product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(190px, 1fr)); gap: .6rem; margin-top: .6rem; }
.product-card { border: 1px solid var(--border); border-radius: 10px; overflow: hidden; background: color-mix(in oklab, var(--panel), #000 4%); display: flex; flex-direction: column; }
.product-card img { width: 100%; aspect-ratio: 16/10; object-fit: cover; }
.product-card .info { padding: .6rem; display: grid; gap: .4rem; }
.product-card h4 { margin: 0; font-size: .95rem; line-height: 1.25; }
.product-card .meta { display: flex; gap: .5rem; align-items: center; color: var(--muted); font-size: .85rem; }
.product-card .price { color: var(--text); font-weight: 600; }
.product-card .rating { color: #ffdf6d; }
.product-card .actions { display: flex; gap: .5rem; margin-top: .2rem; }
.product-card .actions .primary { background: var(--primary); border: 1px solid color-mix(in oklab, var(--primary), #000 8%); }
.product-card .actions .secondary { background: transparent; border: 1px solid var(--border); }
.product-card .actions button { cursor: pointer; color: var(--text); border-radius: 8px; padding: .45rem .7rem; font-size: .85rem; }
.product-card .actions button:hover { filter: brightness(1.05); }

.suggestions { display: flex; gap: .5rem; flex-wrap: wrap; padding: .25rem; }
.chip { border: 1px solid var(--border); background: var(--chip); color: var(--text); padding: .4rem .7rem; border-radius: 999px; cursor: pointer; font-size: .9rem; }
.chip:hover { border-color: color-mix(in oklab, var(--primary), #000 30%); }

.chat-input {
  display: flex;
  gap: .5rem;
  padding: .75rem 1rem;
  border-top: 1px solid var(--border);
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
}
.chat-input textarea {
  flex: 1;
  resize: none;
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .6rem .75rem;
  line-height: 1.45;
  max-height: 35dvh;
}
.chat-input .send {
  background: var(--primary);
  border: 1px solid color-mix(in oklab, var(--primary), #000 10%);
  color: white;
  padding: .6rem .9rem;
  border-radius: 10px;
  cursor: pointer;
  min-width: 72px;
  font-weight: 600;
}
.chat-input .send[disabled] { opacity: .6; cursor: not-allowed; }

@media (max-width: 640px) {
  .chat-main { padding: .75rem; }
  .message-list { min-height: 55dvh; }
  .bubble { max-width: 92%; }
}
